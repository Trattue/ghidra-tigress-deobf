import argparse

from gtd.handler import Handler
from gtd.stuff import do_stuff

handlers_test1_fib = [
    Handler(0xD2, 0x4011E4, 0x40123E, True),
    Handler(0x6B, 0x401246, 0x401274, True),
    Handler(0x4C, 0x40127F, 0x4012CB, True),
    Handler(0x33, 0x4012D6, 0x401313),
    Handler(0x18, 0x40131E, 0x401375, True),
    Handler(0xF0, 0x401380, 0x4013A7),
    Handler(0x2E, 0x4013B2, 0x401413, True),
    Handler(0xBC, 0x40141E, 0x401444),
    Handler(0xA6, 0x40144F, 0x401632),  # 0x401466),  # 0x401461),
    Handler(0x3D, 0x40146C, 0x4014B5),
    Handler(0x77, 0x4014C0, 0x401521, True),
    Handler(0xEA, 0x40152C, 0x401585, True),
    Handler(0x85, 0x401590, 0x4015CF),
    Handler(0xF8, 0x4015DE, 0x40162D),
]

handlers_sample1_fib = [
    Handler(0xCF, 0x4018AC, 0x4018FB),
    Handler(0xB5, 0x401903, 0x40195C, True),
    Handler(0x17, 0x401967, 0x4019B3, True),
    Handler(0x68, 0x4019BE, 0x4019EC, True),
    Handler(0xC0, 0x4019F7, 0x401A4E, True),
    Handler(0x55, 0x401A59, 0x401A98),
    Handler(0xB9, 0x401AA3, 0x401AEC),
    Handler(0x2F, 0x401AF7, 0x401B1D),
    Handler(0x49, 0x401B28, 0x401B82, True),
    Handler(0x83, 0x401B8D, 0x401BEE, True),
    Handler(0x79, 0x401BF9, 0x401C0B),
    Handler(0x53, 0x401C16, 0x401C77, True),
    Handler(0xDB, 0x401C82, 0x401CA9),
    Handler(0x18, 0x401CB8, 0x401CF5),
]

handlers_sample1_xtea = [
    Handler(0xEE, 0x401171, 0x40119A),
    Handler(0xFA, 0x4011A2, 0x4011EF),
    Handler(0xB9, 0x4011FA, 0x401243),
    Handler(0x7C, 0x40124E, 0x401260),
    Handler(0x8A, 0x40126B, 0x4012B9, True),  # TODO: arg of size 8!
    Handler(0x2F, 0x4012C4, 0x401313),
    Handler(0x97, 0x40131E, 0x401367),
    Handler(0xF6, 0x401372, 0x40139A),
    Handler(0xAD, 0x4013A5, 0x4013F2),
    Handler(0x6F, 0x4013FD, 0x401421),
    Handler(0x1A, 0x40142C, 0x401450),
    Handler(0x89, 0x40145B, 0x40145B),
    Handler(0x3D, 0x4014A3, 0x4014EC),
    Handler(0xCA, 0x4014F7, 0x40154E, True),
    Handler(0xBB, 0x401559, 0x4015A5, True),
    Handler(0x1B, 0x4015B0, 0x4015D7),
    Handler(0xF0, 0x4015E2, 0x40162E, True),
    Handler(0x1F, 0x40163D, 0x4016D5, True),
    Handler(0xC1, 0x4016E0, 0x40172E),
    Handler(0xB1, 0x401739, 0x401760),
    Handler(0xE2, 0x40176B, 0x4017B8),
    Handler(0xF4, 0x4017C3, 0x401824, True),
    Handler(0x0, 0x401833, 0x401861, True),
]


def main():
    p = argparse.ArgumentParser()
    p.add_argument("path")
    # p.add_argument("config")
    args = p.parse_args()
    # TODO: do stuff with args.sample and args.config
    # TODO: use configparser
    do_stuff(args.path, handlers_sample1_xtea)
